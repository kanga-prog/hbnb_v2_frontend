{"ast":null,"code":"var _jsxFileName = \"/home/kanga_prog_unix/hbnb_v2/frontend/src/components/place/ReviewForm.jsx\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport API from \"../../services/api\";\nimport StarRating from \"../common/StarRating\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ReviewForm({\n  place_Id,\n  onReviewAdded\n}) {\n  _s();\n  const [comment, setComment] = useState(\"\");\n  const [rating, setRating] = useState(5);\n  const [error, setError] = useState(\"\");\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError(\"\");\n    try {\n      const token = localStorage.getItem(\"token\");\n      if (!token) {\n        setError(\"Vous devez être connecté pour laisser un avis.\");\n        return;\n      }\n      const res = await API.post(`/places/${place_Id}/reviews`, {\n        comment,\n        rating\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          \"Content-Type\": \"application/json\"\n        }\n      });\n      setComment(\"\");\n      setRating(5);\n      if (onReviewAdded) onReviewAdded(res.data);\n    } catch (err) {\n      console.error(err);\n      if (err.response) {\n        var _err$response$data;\n        setError(((_err$response$data = err.response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || \"Erreur côté serveur.\");\n      } else {\n        setError(\"Erreur réseau. Vérifiez votre connexion ou CORS.\");\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    style: {\n      marginTop: \"2rem\",\n      padding: \"1.5rem\",\n      border: \"1px solid #333\",\n      borderRadius: \"8px\",\n      backgroundColor: \"#fafafa\",\n      maxWidth: \"600px\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        marginBottom: \"1rem\",\n        color: \"#000\"\n      },\n      children: \"Laisser un avis :\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        border: \"1px solid #333\",\n        backgroundColor: \"#f0f0f0\",\n        color: \"#000\",\n        padding: \"0.75rem 1rem\",\n        borderRadius: \"5px\",\n        marginBottom: \"1rem\",\n        fontWeight: \"500\"\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(StarRating, {\n      rating: rating,\n      setRating: setRating\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        margin: \"1rem 0\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        style: {\n          display: \"block\",\n          marginBottom: \"0.5rem\",\n          color: \"#000\"\n        },\n        children: \"Commentaire :\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        value: comment,\n        onChange: e => setComment(e.target.value),\n        rows: 4,\n        style: {\n          width: \"100%\",\n          padding: \"0.5rem\",\n          borderRadius: \"5px\",\n          border: \"1px solid #333\",\n          fontFamily: \"inherit\",\n          fontSize: \"1rem\",\n          color: \"#000\",\n          backgroundColor: \"#fff\",\n          resize: \"vertical\"\n        },\n        placeholder: \"Votre avis ici...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      style: {\n        padding: \"0.6rem 1.2rem\",\n        borderRadius: \"5px\",\n        border: \"none\",\n        backgroundColor: \"#333\",\n        color: \"#fff\",\n        cursor: \"pointer\",\n        fontWeight: \"500\",\n        transition: \"background-color 0.2s ease\"\n      },\n      onMouseOver: e => e.currentTarget.style.backgroundColor = \"#555\",\n      onMouseOut: e => e.currentTarget.style.backgroundColor = \"#333\",\n      children: \"Envoyer\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n}\n_s(ReviewForm, \"1JsxhIf7tqfstQyPKFQDGVIq7L0=\");\n_c = ReviewForm;\nvar _c;\n$RefreshReg$(_c, \"ReviewForm\");","map":{"version":3,"names":["useState","API","StarRating","jsxDEV","_jsxDEV","ReviewForm","place_Id","onReviewAdded","_s","comment","setComment","rating","setRating","error","setError","handleSubmit","e","preventDefault","token","localStorage","getItem","res","post","headers","Authorization","data","err","console","response","_err$response$data","message","onSubmit","style","marginTop","padding","border","borderRadius","backgroundColor","maxWidth","children","marginBottom","color","fileName","_jsxFileName","lineNumber","columnNumber","fontWeight","margin","display","value","onChange","target","rows","width","fontFamily","fontSize","resize","placeholder","type","cursor","transition","onMouseOver","currentTarget","onMouseOut","_c","$RefreshReg$"],"sources":["/home/kanga_prog_unix/hbnb_v2/frontend/src/components/place/ReviewForm.jsx"],"sourcesContent":["import { useState } from \"react\";\nimport API from \"../../services/api\";\nimport StarRating from \"../common/StarRating\";\n\nexport default function ReviewForm({ place_Id, onReviewAdded }) {\n  const [comment, setComment] = useState(\"\");\n  const [rating, setRating] = useState(5);\n  const [error, setError] = useState(\"\");\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError(\"\");\n\n    try {\n      const token = localStorage.getItem(\"token\");\n      if (!token) {\n        setError(\"Vous devez être connecté pour laisser un avis.\");\n        return;\n      }\n\n      const res = await API.post(\n        `/places/${place_Id}/reviews`,\n        { comment, rating },\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n            \"Content-Type\": \"application/json\",\n          },\n        }\n      );\n\n      setComment(\"\");\n      setRating(5);\n\n      if (onReviewAdded) onReviewAdded(res.data);\n    } catch (err) {\n      console.error(err);\n      if (err.response) {\n        setError(err.response.data?.message || \"Erreur côté serveur.\");\n      } else {\n        setError(\"Erreur réseau. Vérifiez votre connexion ou CORS.\");\n      }\n    }\n  };\n\n  return (\n    <form\n      onSubmit={handleSubmit}\n      style={{\n        marginTop: \"2rem\",\n        padding: \"1.5rem\",\n        border: \"1px solid #333\",\n        borderRadius: \"8px\",\n        backgroundColor: \"#fafafa\",\n        maxWidth: \"600px\",\n      }}\n    >\n      <h3 style={{ marginBottom: \"1rem\", color: \"#000\" }}>Laisser un avis :</h3>\n\n      {/* Bloc d'erreur esthétique */}\n      {error && (\n        <div\n          style={{\n            border: \"1px solid #333\",\n            backgroundColor: \"#f0f0f0\",\n            color: \"#000\",\n            padding: \"0.75rem 1rem\",\n            borderRadius: \"5px\",\n            marginBottom: \"1rem\",\n            fontWeight: \"500\",\n          }}\n        >\n          {error}\n        </div>\n      )}\n\n      {/* Étoiles interactives */}\n      <StarRating rating={rating} setRating={setRating} />\n\n      <div style={{ margin: \"1rem 0\" }}>\n        <label\n          style={{ display: \"block\", marginBottom: \"0.5rem\", color: \"#000\" }}\n        >\n          Commentaire :\n        </label>\n        <textarea\n          value={comment}\n          onChange={(e) => setComment(e.target.value)}\n          rows={4}\n          style={{\n            width: \"100%\",\n            padding: \"0.5rem\",\n            borderRadius: \"5px\",\n            border: \"1px solid #333\",\n            fontFamily: \"inherit\",\n            fontSize: \"1rem\",\n            color: \"#000\",\n            backgroundColor: \"#fff\",\n            resize: \"vertical\",\n          }}\n          placeholder=\"Votre avis ici...\"\n        />\n      </div>\n\n      <button\n        type=\"submit\"\n        style={{\n          padding: \"0.6rem 1.2rem\",\n          borderRadius: \"5px\",\n          border: \"none\",\n          backgroundColor: \"#333\",\n          color: \"#fff\",\n          cursor: \"pointer\",\n          fontWeight: \"500\",\n          transition: \"background-color 0.2s ease\",\n        }}\n        onMouseOver={(e) => (e.currentTarget.style.backgroundColor = \"#555\")}\n        onMouseOut={(e) => (e.currentTarget.style.backgroundColor = \"#333\")}\n      >\n        Envoyer\n      </button>\n    </form>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}