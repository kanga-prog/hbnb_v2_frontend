{"ast":null,"code":"// src/components/place/ReservationForm.jsx\nimport{useState}from\"react\";import API from\"../../services/api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ReservationForm(_ref){let{place_Id,onReservationAdded}=_ref;const[start,setStart]=useState(\"\");const[end,setEnd]=useState(\"\");const[error,setError]=useState(\"\");const[success,setSuccess]=useState(\"\");const formatDateTime=dt=>(dt===null||dt===void 0?void 0:dt.length)===16?\"\".concat(dt,\":00\"):dt;const handleSubmit=async e=>{e.preventDefault();setError(\"\");setSuccess(\"\");try{const token=localStorage.getItem(\"token\");if(!token){setError(\"Vous devez être connecté pour réserver ce lieu.\");return;}const res=await API.post(\"/reservations/\",{place_id:place_Id,start_datetime:formatDateTime(start),end_datetime:formatDateTime(end)},{headers:{Authorization:\"Bearer \".concat(token)}});setStart(\"\");setEnd(\"\");setSuccess(\"Réservation créée avec succès !\");if(onReservationAdded)onReservationAdded(res.data);}catch(err){var _err$response,_err$response$data,_err$response2,_err$response2$data,_err$response3;console.error(err);const backendError=((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.error)||((_err$response3=err.response)===null||_err$response3===void 0?void 0:_err$response3.data);setError(typeof backendError===\"string\"?backendError:\"Erreur côté serveur.\");}};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,style:{marginTop:\"2rem\",padding:\"1.5rem\",border:\"1px solid #333\",borderRadius:\"8px\",backgroundColor:\"#fafafa\",maxWidth:\"600px\"},children:[/*#__PURE__*/_jsx(\"h3\",{style:{color:\"#000\"},children:\"R\\xE9server ce lieu :\"}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:error}),success&&/*#__PURE__*/_jsx(\"p\",{style:{color:\"green\"},children:success}),/*#__PURE__*/_jsxs(\"div\",{style:{margin:\"1rem 0\"},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:\"block\",color:\"#000\",marginBottom:\"0.5rem\"},children:\"D\\xE9but :\"}),/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",value:start,onChange:e=>setStart(e.target.value),style:{padding:\"0.5rem\",width:\"100%\",borderRadius:\"5px\",border:\"1px solid #333\"}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{margin:\"1rem 0\"},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:\"block\",color:\"#000\",marginBottom:\"0.5rem\"},children:\"Fin :\"}),/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",value:end,onChange:e=>setEnd(e.target.value),style:{padding:\"0.5rem\",width:\"100%\",borderRadius:\"5px\",border:\"1px solid #333\"}})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{padding:\"0.6rem 1.2rem\",borderRadius:\"5px\",border:\"none\",backgroundColor:\"#333\",color:\"#fff\",cursor:\"pointer\",fontWeight:\"500\"},onMouseOver:e=>e.currentTarget.style.backgroundColor=\"#555\",onMouseOut:e=>e.currentTarget.style.backgroundColor=\"#333\",children:\"R\\xE9server\"})]});}","map":{"version":3,"names":["useState","API","jsx","_jsx","jsxs","_jsxs","ReservationForm","_ref","place_Id","onReservationAdded","start","setStart","end","setEnd","error","setError","success","setSuccess","formatDateTime","dt","length","concat","handleSubmit","e","preventDefault","token","localStorage","getItem","res","post","place_id","start_datetime","end_datetime","headers","Authorization","data","err","_err$response","_err$response$data","_err$response2","_err$response2$data","_err$response3","console","backendError","response","message","onSubmit","style","marginTop","padding","border","borderRadius","backgroundColor","maxWidth","children","color","margin","display","marginBottom","type","value","onChange","target","width","cursor","fontWeight","onMouseOver","currentTarget","onMouseOut"],"sources":["/home/kanga_prog_unix/hbnb_v2_frontend/src/components/place/ReservationForm.jsx"],"sourcesContent":["// src/components/place/ReservationForm.jsx\nimport { useState } from \"react\";\nimport API from \"../../services/api\";\n\nexport default function ReservationForm({ place_Id, onReservationAdded }) {\n  const [start, setStart] = useState(\"\");\n  const [end, setEnd] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [success, setSuccess] = useState(\"\");\n\n  const formatDateTime = (dt) => dt?.length === 16 ? `${dt}:00` : dt;\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError(\"\");\n    setSuccess(\"\");\n\n    try {\n      const token = localStorage.getItem(\"token\");\n      if (!token) {\n        setError(\"Vous devez être connecté pour réserver ce lieu.\");\n        return;\n      }\n\n      const res = await API.post(\n        `/reservations/`,\n        {\n          place_id: place_Id,\n          start_datetime: formatDateTime(start),\n          end_datetime: formatDateTime(end),\n        },\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n\n      setStart(\"\");\n      setEnd(\"\");\n      setSuccess(\"Réservation créée avec succès !\");\n      if (onReservationAdded) onReservationAdded(res.data);\n    } catch (err) {\n      console.error(err);\n      const backendError = err.response?.data?.message || err.response?.data?.error || err.response?.data;\n      setError(typeof backendError === \"string\" ? backendError : \"Erreur côté serveur.\");\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} style={{\n      marginTop: \"2rem\",\n      padding: \"1.5rem\",\n      border: \"1px solid #333\",\n      borderRadius: \"8px\",\n      backgroundColor: \"#fafafa\",\n      maxWidth: \"600px\"\n    }}>\n      <h3 style={{ color: \"#000\" }}>Réserver ce lieu :</h3>\n\n      {error && <p style={{ color: \"red\" }}>{error}</p>}\n      {success && <p style={{ color: \"green\" }}>{success}</p>}\n\n      <div style={{ margin: \"1rem 0\" }}>\n        <label style={{ display: \"block\", color: \"#000\", marginBottom: \"0.5rem\" }}>Début :</label>\n        <input\n          type=\"datetime-local\"\n          value={start}\n          onChange={(e) => setStart(e.target.value)}\n          style={{ padding: \"0.5rem\", width: \"100%\", borderRadius: \"5px\", border: \"1px solid #333\" }}\n        />\n      </div>\n\n      <div style={{ margin: \"1rem 0\" }}>\n        <label style={{ display: \"block\", color: \"#000\", marginBottom: \"0.5rem\" }}>Fin :</label>\n        <input\n          type=\"datetime-local\"\n          value={end}\n          onChange={(e) => setEnd(e.target.value)}\n          style={{ padding: \"0.5rem\", width: \"100%\", borderRadius: \"5px\", border: \"1px solid #333\" }}\n        />\n      </div>\n\n      <button\n        type=\"submit\"\n        style={{\n          padding: \"0.6rem 1.2rem\",\n          borderRadius: \"5px\",\n          border: \"none\",\n          backgroundColor: \"#333\",\n          color: \"#fff\",\n          cursor: \"pointer\",\n          fontWeight: \"500\"\n        }}\n        onMouseOver={(e) => (e.currentTarget.style.backgroundColor = \"#555\")}\n        onMouseOut={(e) => (e.currentTarget.style.backgroundColor = \"#333\")}\n      >\n        Réserver\n      </button>\n    </form>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}