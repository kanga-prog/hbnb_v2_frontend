{"ast":null,"code":"import{useState}from\"react\";import API from\"../../services/api\";import StarRating from\"../common/StarRating\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ReviewForm(_ref){let{place_Id,onReviewAdded}=_ref;const[comment,setComment]=useState(\"\");const[rating,setRating]=useState(5);const[error,setError]=useState(\"\");const handleSubmit=async e=>{e.preventDefault();setError(\"\");try{const token=localStorage.getItem(\"token\");if(!token){setError(\"Vous devez être connecté pour laisser un avis.\");return;}const res=await API.post(\"/places/\".concat(place_Id,\"/reviews\"),{comment,rating},{headers:{Authorization:\"Bearer \".concat(token),\"Content-Type\":\"application/json\"}});setComment(\"\");setRating(5);if(onReviewAdded)onReviewAdded(res.data);}catch(err){console.error(err);if(err.response){var _err$response$data;setError(((_err$response$data=err.response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||\"Erreur côté serveur.\");}else{setError(\"Erreur réseau. Vérifiez votre connexion ou CORS.\");}}};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,style:{marginTop:\"2rem\",padding:\"1.5rem\",border:\"1px solid #333\",borderRadius:\"8px\",backgroundColor:\"#fafafa\",maxWidth:\"600px\"},children:[/*#__PURE__*/_jsx(\"h3\",{style:{marginBottom:\"1rem\",color:\"#000\"},children:\"Laisser un avis :\"}),error&&/*#__PURE__*/_jsx(\"div\",{style:{border:\"1px solid #333\",backgroundColor:\"#f0f0f0\",color:\"#000\",padding:\"0.75rem 1rem\",borderRadius:\"5px\",marginBottom:\"1rem\",fontWeight:\"500\"},children:error}),/*#__PURE__*/_jsx(StarRating,{rating:rating,setRating:setRating}),/*#__PURE__*/_jsxs(\"div\",{style:{margin:\"1rem 0\"},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:\"block\",marginBottom:\"0.5rem\",color:\"#000\"},children:\"Commentaire :\"}),/*#__PURE__*/_jsx(\"textarea\",{value:comment,onChange:e=>setComment(e.target.value),rows:4,style:{width:\"100%\",padding:\"0.5rem\",borderRadius:\"5px\",border:\"1px solid #333\",fontFamily:\"inherit\",fontSize:\"1rem\",color:\"#000\",backgroundColor:\"#fff\",resize:\"vertical\"},placeholder:\"Votre avis ici...\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{padding:\"0.6rem 1.2rem\",borderRadius:\"5px\",border:\"none\",backgroundColor:\"#333\",color:\"#fff\",cursor:\"pointer\",fontWeight:\"500\",transition:\"background-color 0.2s ease\"},onMouseOver:e=>e.currentTarget.style.backgroundColor=\"#555\",onMouseOut:e=>e.currentTarget.style.backgroundColor=\"#333\",children:\"Envoyer\"})]});}","map":{"version":3,"names":["useState","API","StarRating","jsx","_jsx","jsxs","_jsxs","ReviewForm","_ref","place_Id","onReviewAdded","comment","setComment","rating","setRating","error","setError","handleSubmit","e","preventDefault","token","localStorage","getItem","res","post","concat","headers","Authorization","data","err","console","response","_err$response$data","message","onSubmit","style","marginTop","padding","border","borderRadius","backgroundColor","maxWidth","children","marginBottom","color","fontWeight","margin","display","value","onChange","target","rows","width","fontFamily","fontSize","resize","placeholder","type","cursor","transition","onMouseOver","currentTarget","onMouseOut"],"sources":["/home/kanga_prog_unix/hbnb_v2_frontend/src/components/place/ReviewForm.jsx"],"sourcesContent":["import { useState } from \"react\";\nimport API from \"../../services/api\";\nimport StarRating from \"../common/StarRating\";\n\nexport default function ReviewForm({ place_Id, onReviewAdded }) {\n  const [comment, setComment] = useState(\"\");\n  const [rating, setRating] = useState(5);\n  const [error, setError] = useState(\"\");\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError(\"\");\n\n    try {\n      const token = localStorage.getItem(\"token\");\n      if (!token) {\n        setError(\"Vous devez être connecté pour laisser un avis.\");\n        return;\n      }\n\n      const res = await API.post(\n        `/places/${place_Id}/reviews`,\n        { comment, rating },\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n            \"Content-Type\": \"application/json\",\n          },\n        }\n      );\n\n      setComment(\"\");\n      setRating(5);\n\n      if (onReviewAdded) onReviewAdded(res.data);\n    } catch (err) {\n      console.error(err);\n      if (err.response) {\n        setError(err.response.data?.message || \"Erreur côté serveur.\");\n      } else {\n        setError(\"Erreur réseau. Vérifiez votre connexion ou CORS.\");\n      }\n    }\n  };\n\n  return (\n    <form\n      onSubmit={handleSubmit}\n      style={{\n        marginTop: \"2rem\",\n        padding: \"1.5rem\",\n        border: \"1px solid #333\",\n        borderRadius: \"8px\",\n        backgroundColor: \"#fafafa\",\n        maxWidth: \"600px\",\n      }}\n    >\n      <h3 style={{ marginBottom: \"1rem\", color: \"#000\" }}>Laisser un avis :</h3>\n\n      {/* Bloc d'erreur esthétique */}\n      {error && (\n        <div\n          style={{\n            border: \"1px solid #333\",\n            backgroundColor: \"#f0f0f0\",\n            color: \"#000\",\n            padding: \"0.75rem 1rem\",\n            borderRadius: \"5px\",\n            marginBottom: \"1rem\",\n            fontWeight: \"500\",\n          }}\n        >\n          {error}\n        </div>\n      )}\n\n      {/* Étoiles interactives */}\n      <StarRating rating={rating} setRating={setRating} />\n\n      <div style={{ margin: \"1rem 0\" }}>\n        <label\n          style={{ display: \"block\", marginBottom: \"0.5rem\", color: \"#000\" }}\n        >\n          Commentaire :\n        </label>\n        <textarea\n          value={comment}\n          onChange={(e) => setComment(e.target.value)}\n          rows={4}\n          style={{\n            width: \"100%\",\n            padding: \"0.5rem\",\n            borderRadius: \"5px\",\n            border: \"1px solid #333\",\n            fontFamily: \"inherit\",\n            fontSize: \"1rem\",\n            color: \"#000\",\n            backgroundColor: \"#fff\",\n            resize: \"vertical\",\n          }}\n          placeholder=\"Votre avis ici...\"\n        />\n      </div>\n\n      <button\n        type=\"submit\"\n        style={{\n          padding: \"0.6rem 1.2rem\",\n          borderRadius: \"5px\",\n          border: \"none\",\n          backgroundColor: \"#333\",\n          color: \"#fff\",\n          cursor: \"pointer\",\n          fontWeight: \"500\",\n          transition: \"background-color 0.2s ease\",\n        }}\n        onMouseOver={(e) => (e.currentTarget.style.backgroundColor = \"#555\")}\n        onMouseOut={(e) => (e.currentTarget.style.backgroundColor = \"#333\")}\n      >\n        Envoyer\n      </button>\n    </form>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}