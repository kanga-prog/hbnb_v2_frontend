{"ast":null,"code":"import{jwtDecode}from\"jwt-decode\";export function saveToken(token){localStorage.setItem(\"token\",token);}export function getToken(){return localStorage.getItem(\"token\");}export function logout(){localStorage.removeItem(\"token\");}export function getCurrentUser(){const token=getToken();if(!token)return null;try{var _decoded$sub;const decoded=jwtDecode(token);return{id:((_decoded$sub=decoded.sub)===null||_decoded$sub===void 0?void 0:_decoded$sub.toString())||\"\",// l’ID vient de `identity`\nusername:decoded.username||\"\",// injecté via `additional_claims`\nis_admin:!!decoded.is_admin// idem\n};}catch(err){console.error(\"Erreur décodage JWT :\",err);return null;}}","map":{"version":3,"names":["jwtDecode","saveToken","token","localStorage","setItem","getToken","getItem","logout","removeItem","getCurrentUser","_decoded$sub","decoded","id","sub","toString","username","is_admin","err","console","error"],"sources":["/home/kanga_prog_unix/hbnb_v2_frontend/src/utils/auth.js"],"sourcesContent":["import { jwtDecode } from \"jwt-decode\";\n\nexport function saveToken(token) {\n  localStorage.setItem(\"token\", token);\n}\n\nexport function getToken() {\n  return localStorage.getItem(\"token\");\n}\n\nexport function logout() {\n  localStorage.removeItem(\"token\");\n}\n\nexport function getCurrentUser() {\n  const token = getToken();\n  if (!token) return null;\n\n  try {\n    const decoded = jwtDecode(token);\n\n    return {\n      id: decoded.sub?.toString() || \"\",   // l’ID vient de `identity`\n      username: decoded.username || \"\",    // injecté via `additional_claims`\n      is_admin: !!decoded.is_admin,        // idem\n    };\n  } catch (err) {\n    console.error(\"Erreur décodage JWT :\", err);\n    return null;\n  }\n}\n"],"mappings":"AAAA,OAASA,SAAS,KAAQ,YAAY,CAEtC,MAAO,SAAS,CAAAC,SAASA,CAACC,KAAK,CAAE,CAC/BC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAEF,KAAK,CAAC,CACtC,CAEA,MAAO,SAAS,CAAAG,QAAQA,CAAA,CAAG,CACzB,MAAO,CAAAF,YAAY,CAACG,OAAO,CAAC,OAAO,CAAC,CACtC,CAEA,MAAO,SAAS,CAAAC,MAAMA,CAAA,CAAG,CACvBJ,YAAY,CAACK,UAAU,CAAC,OAAO,CAAC,CAClC,CAEA,MAAO,SAAS,CAAAC,cAAcA,CAAA,CAAG,CAC/B,KAAM,CAAAP,KAAK,CAAGG,QAAQ,CAAC,CAAC,CACxB,GAAI,CAACH,KAAK,CAAE,MAAO,KAAI,CAEvB,GAAI,KAAAQ,YAAA,CACF,KAAM,CAAAC,OAAO,CAAGX,SAAS,CAACE,KAAK,CAAC,CAEhC,MAAO,CACLU,EAAE,CAAE,EAAAF,YAAA,CAAAC,OAAO,CAACE,GAAG,UAAAH,YAAA,iBAAXA,YAAA,CAAaI,QAAQ,CAAC,CAAC,GAAI,EAAE,CAAI;AACrCC,QAAQ,CAAEJ,OAAO,CAACI,QAAQ,EAAI,EAAE,CAAK;AACrCC,QAAQ,CAAE,CAAC,CAACL,OAAO,CAACK,QAAiB;AACvC,CAAC,CACH,CAAE,MAAOC,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAAC,uBAAuB,CAAEF,GAAG,CAAC,CAC3C,MAAO,KAAI,CACb,CACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}