{"ast":null,"code":"import _objectSpread from\"/home/kanga_prog_unix/hbnb_v2_frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// src/pages/RegisterPage.jsx\nimport React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import API from\"../services/api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function RegisterPage(){const navigate=useNavigate();const[formData,setFormData]=useState({username:\"\",email:\"\",password:\"\",phone_number:\"\",country:\"\",town:\"\"});const[message,setMessage]=useState(\"\");// Mise à jour des champs du formulaire\nconst handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));};// Envoi au backend\nconst handleSubmit=async e=>{e.preventDefault();setMessage(\"\");try{// ✅ Utilisation de notre instance API\nconst response=await API.post(\"/auth/register\",formData);if(response.status===201||response.status===200){setMessage(\"Inscription réussie ! Vous pouvez vous connecter.\");setTimeout(()=>navigate(\"/login\"),1500);}else{setMessage(response.data.message||\"Erreur lors de l’inscription.\");}}catch(error){var _error$response;console.error(\"Erreur :\",((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data)||error.message);// Gestion des erreurs spécifiques\nif(error.response){// Le backend a renvoyé une réponse avec un statut\nswitch(error.response.status){case 400:setMessage(\"Certains champs sont manquants ou invalides.\");break;case 409:setMessage(error.response.data.message||\"Conflit : email, username ou téléphone déjà utilisé.\");break;case 500:setMessage(\"Erreur serveur. Merci de réessayer plus tard.\");break;default:setMessage(error.response.data.message||\"Erreur lors de l’inscription.\");}}else{// Pas de réponse du serveur\nsetMessage(\"Impossible de contacter le serveur. Vérifiez votre connexion.\");}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md mx-auto mt-10 p-6 shadow-md rounded-xl bg-white\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4 text-center\",children:\"Cr\\xE9er un compte\"}),message&&/*#__PURE__*/_jsx(\"p\",{className:\"mb-4 text-center text-red-500\",children:message}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",placeholder:\"Nom d\\u2019utilisateur\",value:formData.username,onChange:handleChange,required:true,className:\"w-full p-2 border rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"Adresse e-mail\",value:formData.email,onChange:handleChange,required:true,className:\"w-full p-2 border rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"Mot de passe\",value:formData.password,onChange:handleChange,required:true,className:\"w-full p-2 border rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"phone_number\",placeholder:\"Num\\xE9ro de t\\xE9l\\xE9phone\",value:formData.phone_number,onChange:handleChange,className:\"w-full p-2 border rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"country\",placeholder:\"Pays\",value:formData.country,onChange:handleChange,required:true,className:\"w-full p-2 border rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"town\",placeholder:\"Ville\",value:formData.town,onChange:handleChange,required:true,className:\"w-full p-2 border rounded\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition\",children:\"S\\u2019inscrire\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-4 text-center\",children:[\"D\\xE9j\\xE0 inscrit ?\",\" \",/*#__PURE__*/_jsx(\"span\",{onClick:()=>navigate(\"/login\"),className:\"text-blue-600 cursor-pointer\",children:\"Se connecter\"})]})]});}export default RegisterPage;","map":{"version":3,"names":["React","useState","useNavigate","API","jsx","_jsx","jsxs","_jsxs","RegisterPage","navigate","formData","setFormData","username","email","password","phone_number","country","town","message","setMessage","handleChange","e","_objectSpread","target","name","value","handleSubmit","preventDefault","response","post","status","setTimeout","data","error","_error$response","console","className","children","onSubmit","type","placeholder","onChange","required","onClick"],"sources":["/home/kanga_prog_unix/hbnb_v2_frontend/src/pages/RegisterPage.jsx"],"sourcesContent":["// src/pages/RegisterPage.jsx\nimport React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport API from \"../services/api\";\n\nfunction RegisterPage() {\n  const navigate = useNavigate();\n  const [formData, setFormData] = useState({\n    username: \"\",\n    email: \"\",\n    password: \"\",\n    phone_number: \"\",\n    country: \"\",\n    town: \"\"\n  });\n\n  const [message, setMessage] = useState(\"\");\n\n  // Mise à jour des champs du formulaire\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  // Envoi au backend\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setMessage(\"\");\n\n    try {\n      // ✅ Utilisation de notre instance API\n      const response = await API.post(\"/auth/register\", formData);\n\n      if (response.status === 201 || response.status === 200) {\n        setMessage(\"Inscription réussie ! Vous pouvez vous connecter.\");\n        setTimeout(() => navigate(\"/login\"), 1500);\n      } else {\n        setMessage(response.data.message || \"Erreur lors de l’inscription.\");\n      }\n    } catch (error) {\n      console.error(\"Erreur :\", error.response?.data || error.message);\n\n      // Gestion des erreurs spécifiques\n      if (error.response) {\n        // Le backend a renvoyé une réponse avec un statut\n        switch (error.response.status) {\n          case 400:\n            setMessage(\"Certains champs sont manquants ou invalides.\");\n            break;\n          case 409:\n            setMessage(\n              error.response.data.message || \"Conflit : email, username ou téléphone déjà utilisé.\"\n            );\n            break;\n          case 500:\n            setMessage(\"Erreur serveur. Merci de réessayer plus tard.\");\n            break;\n          default:\n            setMessage(error.response.data.message || \"Erreur lors de l’inscription.\");\n        }\n      } else {\n        // Pas de réponse du serveur\n        setMessage(\"Impossible de contacter le serveur. Vérifiez votre connexion.\");\n      }\n    }\n  };\n\n  return (\n    <div className=\"max-w-md mx-auto mt-10 p-6 shadow-md rounded-xl bg-white\">\n      <h2 className=\"text-2xl font-bold mb-4 text-center\">Créer un compte</h2>\n      {message && (\n        <p className=\"mb-4 text-center text-red-500\">{message}</p>\n      )}\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\n        <input\n          type=\"text\"\n          name=\"username\"\n          placeholder=\"Nom d’utilisateur\"\n          value={formData.username}\n          onChange={handleChange}\n          required\n          className=\"w-full p-2 border rounded\"\n        />\n        <input\n          type=\"email\"\n          name=\"email\"\n          placeholder=\"Adresse e-mail\"\n          value={formData.email}\n          onChange={handleChange}\n          required\n          className=\"w-full p-2 border rounded\"\n        />\n        <input\n          type=\"password\"\n          name=\"password\"\n          placeholder=\"Mot de passe\"\n          value={formData.password}\n          onChange={handleChange}\n          required\n          className=\"w-full p-2 border rounded\"\n        />\n        <input\n          type=\"text\"\n          name=\"phone_number\"\n          placeholder=\"Numéro de téléphone\"\n          value={formData.phone_number}\n          onChange={handleChange}\n          className=\"w-full p-2 border rounded\"\n        />\n        <input\n          type=\"text\"\n          name=\"country\"\n          placeholder=\"Pays\"\n          value={formData.country}\n          onChange={handleChange}\n          required\n          className=\"w-full p-2 border rounded\"\n        />\n        <input\n          type=\"text\"\n          name=\"town\"\n          placeholder=\"Ville\"\n          value={formData.town}\n          onChange={handleChange}\n          required\n          className=\"w-full p-2 border rounded\"\n        />\n        <button\n          type=\"submit\"\n          className=\"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition\"\n        >\n          S’inscrire\n        </button>\n      </form>\n      <p className=\"mt-4 text-center\">\n        Déjà inscrit ?{\" \"}\n        <span\n          onClick={() => navigate(\"/login\")}\n          className=\"text-blue-600 cursor-pointer\"\n        >\n          Se connecter\n        </span>\n      </p>\n    </div>\n  );\n}\n\nexport default RegisterPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}