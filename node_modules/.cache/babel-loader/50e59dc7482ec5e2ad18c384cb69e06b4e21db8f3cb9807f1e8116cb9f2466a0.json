{"ast":null,"code":"var _jsxFileName = \"/home/kanga_prog_unix/hbnb_v2/frontend/src/pages/LoginPage.jsx\",\n  _s = $RefreshSig$();\n// src/pages/LoginPage.jsx\nimport React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport ResetPasswordForm from \"./ResetPasswordForm\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction LoginPage() {\n  _s();\n  const navigate = useNavigate();\n  const [formData, setFormData] = useState({\n    email: \"\",\n    password: \"\"\n  });\n  const [message, setMessage] = useState(\"\");\n  const [showReset, setShowReset] = useState(false);\n  const handleChange = e => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setMessage(\"\");\n    try {\n      const response = await fetch(\"http://127.0.0.1:5000/api/auth/login\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(formData)\n      });\n      const data = await response.json();\n      if (response.ok) {\n        setMessage(\"Un code de vérification a été envoyé à votre email.\");\n        localStorage.setItem(\"pendingEmail\", formData.email);\n        setTimeout(() => navigate(\"/verify\"), 1500);\n      } else {\n        setMessage(data.message || \"Email ou mot de passe incorrect.\");\n      }\n    } catch (error) {\n      console.error(\"Erreur :\", error);\n      setMessage(\"Impossible de contacter le serveur.\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-md mx-auto mt-10 p-6 shadow-md rounded-xl bg-white\",\n    children: !showReset ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-bold mb-4 text-center\",\n        children: \"Se connecter\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 11\n      }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mb-4 text-center text-red-500\",\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 23\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          name: \"email\",\n          placeholder: \"Adresse e-mail\",\n          value: formData.email,\n          onChange: handleChange,\n          required: true,\n          className: \"w-full p-2 border rounded\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          name: \"password\",\n          placeholder: \"Mot de passe\",\n          value: formData.password,\n          onChange: handleChange,\n          required: true,\n          className: \"w-full p-2 border rounded\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition\",\n          children: \"Se connecter\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-4 text-center\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          onClick: () => setShowReset(true),\n          className: \"text-blue-600 cursor-pointer\",\n          children: \"Mot de passe oubli\\xE9 ?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-2 text-center\",\n        children: [\"Pas encore inscrit ?\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n          onClick: () => navigate(\"/register\"),\n          className: \"text-blue-600 cursor-pointer\",\n          children: \"Cr\\xE9er un compte\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(ResetPasswordForm, {\n      mode: \"forgot\",\n      userEmail: formData.email,\n      onCancel: () => setShowReset(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n}\n_s(LoginPage, \"sGIxk5KvhaLqcjpD1ePDcZHbKI4=\", false, function () {\n  return [useNavigate];\n});\n_c = LoginPage;\nexport default LoginPage;\nvar _c;\n$RefreshReg$(_c, \"LoginPage\");","map":{"version":3,"names":["React","useState","useNavigate","ResetPasswordForm","jsxDEV","_jsxDEV","Fragment","_Fragment","LoginPage","_s","navigate","formData","setFormData","email","password","message","setMessage","showReset","setShowReset","handleChange","e","target","name","value","handleSubmit","preventDefault","response","fetch","method","headers","body","JSON","stringify","data","json","ok","localStorage","setItem","setTimeout","error","console","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","placeholder","onChange","required","onClick","mode","userEmail","onCancel","_c","$RefreshReg$"],"sources":["/home/kanga_prog_unix/hbnb_v2/frontend/src/pages/LoginPage.jsx"],"sourcesContent":["// src/pages/LoginPage.jsx\nimport React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport ResetPasswordForm from \"./ResetPasswordForm\";\n\nfunction LoginPage() {\n  const navigate = useNavigate();\n  const [formData, setFormData] = useState({ email: \"\", password: \"\" });\n  const [message, setMessage] = useState(\"\");\n  const [showReset, setShowReset] = useState(false);\n\n  const handleChange = (e) => {\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setMessage(\"\");\n\n    try {\n      const response = await fetch(\"http://127.0.0.1:5000/api/auth/login\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(formData)\n      });\n\n      const data = await response.json();\n\n      if (response.ok) {\n        setMessage(\"Un code de vérification a été envoyé à votre email.\");\n        localStorage.setItem(\"pendingEmail\", formData.email);\n        setTimeout(() => navigate(\"/verify\"), 1500);\n      } else {\n        setMessage(data.message || \"Email ou mot de passe incorrect.\");\n      }\n    } catch (error) {\n      console.error(\"Erreur :\", error);\n      setMessage(\"Impossible de contacter le serveur.\");\n    }\n  };\n\n  return (\n    <div className=\"max-w-md mx-auto mt-10 p-6 shadow-md rounded-xl bg-white\">\n      {!showReset ? (\n        <>\n          <h2 className=\"text-2xl font-bold mb-4 text-center\">Se connecter</h2>\n          {message && <p className=\"mb-4 text-center text-red-500\">{message}</p>}\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <input\n              type=\"email\"\n              name=\"email\"\n              placeholder=\"Adresse e-mail\"\n              value={formData.email}\n              onChange={handleChange}\n              required\n              className=\"w-full p-2 border rounded\"\n            />\n            <input\n              type=\"password\"\n              name=\"password\"\n              placeholder=\"Mot de passe\"\n              value={formData.password}\n              onChange={handleChange}\n              required\n              className=\"w-full p-2 border rounded\"\n            />\n            <button\n              type=\"submit\"\n              className=\"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition\"\n            >\n              Se connecter\n            </button>\n          </form>\n          <p className=\"mt-4 text-center\">\n            <span\n              onClick={() => setShowReset(true)}\n              className=\"text-blue-600 cursor-pointer\"\n            >\n              Mot de passe oublié ?\n            </span>\n          </p>\n          <p className=\"mt-2 text-center\">\n            Pas encore inscrit ?{\" \"}\n            <span\n              onClick={() => navigate(\"/register\")}\n              className=\"text-blue-600 cursor-pointer\"\n            >\n              Créer un compte\n            </span>\n          </p>\n        </>\n      ) : (\n        <ResetPasswordForm\n          mode=\"forgot\"\n          userEmail={formData.email}\n          onCancel={() => setShowReset(false)}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default LoginPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}