{"ast":null,"code":"// src/services/api.js\nimport axios from\"axios\";const API=axios.create({baseURL:process.env.REACT_APP_API_URL||\"https://hbnb-v2-backend.onrender.com/api\",headers:{\"Content-Type\":\"application/json\"}});// 🔐 Intercepteur JWT + gestion FormData\nAPI.interceptors.request.use(config=>{const token=localStorage.getItem(\"token\");if(token)config.headers.Authorization=\"Bearer \".concat(token);if(config.data instanceof FormData)delete config.headers[\"Content-Type\"];return config;});// 🏠 Création d’un lieu\nexport const createPlace=async placeData=>{const response=await API.post(\"/places\",placeData);return response.data;};// 📸 Upload image de lieu\nexport const uploadPlaceImage=async(placeId,file)=>{const formData=new FormData();formData.append(\"image\",file);const res=await API.post(\"/places/\".concat(placeId,\"/images\"),formData);return res.data;};// 👤 Upload avatar utilisateur\nexport const uploadAvatar=async(userId,file)=>{const formData=new FormData();formData.append(\"avatar\",file);const res=await API.post(\"/users/\".concat(userId,\"/avatar\"),formData);return res.data;};export default API;","map":{"version":3,"names":["axios","API","create","baseURL","process","env","REACT_APP_API_URL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","concat","data","FormData","createPlace","placeData","response","post","uploadPlaceImage","placeId","file","formData","append","res","uploadAvatar","userId"],"sources":["/home/kanga_prog_unix/hbnb_v2_frontend/src/services/api.js"],"sourcesContent":["// src/services/api.js\nimport axios from \"axios\";\n\nconst API = axios.create({\n  baseURL:\n    process.env.REACT_APP_API_URL ||\n    \"https://hbnb-v2-backend.onrender.com/api\",\n  headers: { \"Content-Type\": \"application/json\" },\n});\n\n// 🔐 Intercepteur JWT + gestion FormData\nAPI.interceptors.request.use((config) => {\n  const token = localStorage.getItem(\"token\");\n  if (token) config.headers.Authorization = `Bearer ${token}`;\n  if (config.data instanceof FormData) delete config.headers[\"Content-Type\"];\n  return config;\n});\n\n// 🏠 Création d’un lieu\nexport const createPlace = async (placeData) => {\n  const response = await API.post(\"/places\", placeData);\n  return response.data;\n};\n\n// 📸 Upload image de lieu\nexport const uploadPlaceImage = async (placeId, file) => {\n  const formData = new FormData();\n  formData.append(\"image\", file);\n  const res = await API.post(`/places/${placeId}/images`, formData);\n  return res.data;\n};\n\n// 👤 Upload avatar utilisateur\nexport const uploadAvatar = async (userId, file) => {\n  const formData = new FormData();\n  formData.append(\"avatar\", file);\n  const res = await API.post(`/users/${userId}/avatar`, formData);\n  return res.data;\n};\n\nexport default API;\n"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAEzB,KAAM,CAAAC,GAAG,CAAGD,KAAK,CAACE,MAAM,CAAC,CACvBC,OAAO,CACLC,OAAO,CAACC,GAAG,CAACC,iBAAiB,EAC7B,0CAA0C,CAC5CC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAChD,CAAC,CAAC,CAEF;AACAN,GAAG,CAACO,YAAY,CAACC,OAAO,CAACC,GAAG,CAAEC,MAAM,EAAK,CACvC,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAIF,KAAK,CAAED,MAAM,CAACJ,OAAO,CAACQ,aAAa,WAAAC,MAAA,CAAaJ,KAAK,CAAE,CAC3D,GAAID,MAAM,CAACM,IAAI,WAAY,CAAAC,QAAQ,CAAE,MAAO,CAAAP,MAAM,CAACJ,OAAO,CAAC,cAAc,CAAC,CAC1E,MAAO,CAAAI,MAAM,CACf,CAAC,CAAC,CAEF;AACA,MAAO,MAAM,CAAAQ,WAAW,CAAG,KAAO,CAAAC,SAAS,EAAK,CAC9C,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAApB,GAAG,CAACqB,IAAI,CAAC,SAAS,CAAEF,SAAS,CAAC,CACrD,MAAO,CAAAC,QAAQ,CAACJ,IAAI,CACtB,CAAC,CAED;AACA,MAAO,MAAM,CAAAM,gBAAgB,CAAG,KAAAA,CAAOC,OAAO,CAAEC,IAAI,GAAK,CACvD,KAAM,CAAAC,QAAQ,CAAG,GAAI,CAAAR,QAAQ,CAAC,CAAC,CAC/BQ,QAAQ,CAACC,MAAM,CAAC,OAAO,CAAEF,IAAI,CAAC,CAC9B,KAAM,CAAAG,GAAG,CAAG,KAAM,CAAA3B,GAAG,CAACqB,IAAI,YAAAN,MAAA,CAAYQ,OAAO,YAAWE,QAAQ,CAAC,CACjE,MAAO,CAAAE,GAAG,CAACX,IAAI,CACjB,CAAC,CAED;AACA,MAAO,MAAM,CAAAY,YAAY,CAAG,KAAAA,CAAOC,MAAM,CAAEL,IAAI,GAAK,CAClD,KAAM,CAAAC,QAAQ,CAAG,GAAI,CAAAR,QAAQ,CAAC,CAAC,CAC/BQ,QAAQ,CAACC,MAAM,CAAC,QAAQ,CAAEF,IAAI,CAAC,CAC/B,KAAM,CAAAG,GAAG,CAAG,KAAM,CAAA3B,GAAG,CAACqB,IAAI,WAAAN,MAAA,CAAWc,MAAM,YAAWJ,QAAQ,CAAC,CAC/D,MAAO,CAAAE,GAAG,CAACX,IAAI,CACjB,CAAC,CAED,cAAe,CAAAhB,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}