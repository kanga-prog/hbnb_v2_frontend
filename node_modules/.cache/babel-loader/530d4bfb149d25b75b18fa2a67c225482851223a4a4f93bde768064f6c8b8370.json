{"ast":null,"code":"// src/pages/Profile.jsx\nimport{useState,useContext}from\"react\";import{UserContext}from\"../contexts/UserContext\";import{uploadAvatar}from\"../services/api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Profile(){const{user,setUser}=useContext(UserContext);const[file,setFile]=useState(null);const handleFileChange=e=>setFile(e.target.files[0]);const handleUpload=async()=>{if(!file||!user)return;try{const res=await uploadAvatar(user.id,file);// Mettre à jour l'avatar dans le contexte utilisateur\nsetUser(res);setFile(null);}catch(err){console.error(\"Erreur lors de l'upload de l'avatar :\",err);}};if(!user)return/*#__PURE__*/_jsx(\"p\",{children:\"Chargement...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md mx-auto mt-10 p-6 shadow-md rounded-xl bg-white text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4\",children:\"Mon profil\"}),user.avatar&&/*#__PURE__*/_jsx(\"img\",{src:\"http://127.0.0.1:5000\".concat(user.avatar),alt:\"Avatar\",width:150,className:\"mx-auto mb-4 rounded-full shadow\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleFileChange,className:\"mb-4 w-full p-2 border rounded\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUpload,className:\"w-full bg-green-600 text-white py-2 rounded hover:bg-green-700 transition\",children:\"Uploader\"})]});}","map":{"version":3,"names":["useState","useContext","UserContext","uploadAvatar","jsx","_jsx","jsxs","_jsxs","Profile","user","setUser","file","setFile","handleFileChange","e","target","files","handleUpload","res","id","err","console","error","children","className","avatar","src","concat","alt","width","type","onChange","onClick"],"sources":["/home/kanga_prog_unix/hbnb_v2_frontend/src/pages/Profile.jsx"],"sourcesContent":["// src/pages/Profile.jsx\nimport { useState, useContext } from \"react\";\nimport { UserContext } from \"../contexts/UserContext\";\nimport { uploadAvatar } from \"../services/api\";\n\nexport default function Profile() {\n  const { user, setUser } = useContext(UserContext);\n  const [file, setFile] = useState(null);\n\n  const handleFileChange = (e) => setFile(e.target.files[0]);\n\n  const handleUpload = async () => {\n    if (!file || !user) return;\n\n    try {\n      const res = await uploadAvatar(user.id, file);\n\n      // Mettre à jour l'avatar dans le contexte utilisateur\n      setUser(res);\n      setFile(null);\n    } catch (err) {\n      console.error(\"Erreur lors de l'upload de l'avatar :\", err);\n    }\n  };\n\n  if (!user) return <p>Chargement...</p>;\n\n  return (\n    <div className=\"max-w-md mx-auto mt-10 p-6 shadow-md rounded-xl bg-white text-center\">\n      <h2 className=\"text-2xl font-bold mb-4\">Mon profil</h2>\n\n      {user.avatar && (\n        <img\n          src={`http://127.0.0.1:5000${user.avatar}`}\n          alt=\"Avatar\"\n          width={150}\n          className=\"mx-auto mb-4 rounded-full shadow\"\n        />\n      )}\n\n      <input\n        type=\"file\"\n        onChange={handleFileChange}\n        className=\"mb-4 w-full p-2 border rounded\"\n      />\n      <button\n        onClick={handleUpload}\n        className=\"w-full bg-green-600 text-white py-2 rounded hover:bg-green-700 transition\"\n      >\n        Uploader\n      </button>\n    </div>\n  );\n}\n"],"mappings":"AAAA;AACA,OAASA,QAAQ,CAAEC,UAAU,KAAQ,OAAO,CAC5C,OAASC,WAAW,KAAQ,yBAAyB,CACrD,OAASC,YAAY,KAAQ,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/C,cAAe,SAAS,CAAAC,OAAOA,CAAA,CAAG,CAChC,KAAM,CAAEC,IAAI,CAAEC,OAAQ,CAAC,CAAGT,UAAU,CAACC,WAAW,CAAC,CACjD,KAAM,CAACS,IAAI,CAAEC,OAAO,CAAC,CAAGZ,QAAQ,CAAC,IAAI,CAAC,CAEtC,KAAM,CAAAa,gBAAgB,CAAIC,CAAC,EAAKF,OAAO,CAACE,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,CAE1D,KAAM,CAAAC,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CAACN,IAAI,EAAI,CAACF,IAAI,CAAE,OAEpB,GAAI,CACF,KAAM,CAAAS,GAAG,CAAG,KAAM,CAAAf,YAAY,CAACM,IAAI,CAACU,EAAE,CAAER,IAAI,CAAC,CAE7C;AACAD,OAAO,CAACQ,GAAG,CAAC,CACZN,OAAO,CAAC,IAAI,CAAC,CACf,CAAE,MAAOQ,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAAC,uCAAuC,CAAEF,GAAG,CAAC,CAC7D,CACF,CAAC,CAED,GAAI,CAACX,IAAI,CAAE,mBAAOJ,IAAA,MAAAkB,QAAA,CAAG,eAAa,CAAG,CAAC,CAEtC,mBACEhB,KAAA,QAAKiB,SAAS,CAAC,sEAAsE,CAAAD,QAAA,eACnFlB,IAAA,OAAImB,SAAS,CAAC,yBAAyB,CAAAD,QAAA,CAAC,YAAU,CAAI,CAAC,CAEtDd,IAAI,CAACgB,MAAM,eACVpB,IAAA,QACEqB,GAAG,yBAAAC,MAAA,CAA0BlB,IAAI,CAACgB,MAAM,CAAG,CAC3CG,GAAG,CAAC,QAAQ,CACZC,KAAK,CAAE,GAAI,CACXL,SAAS,CAAC,kCAAkC,CAC7C,CACF,cAEDnB,IAAA,UACEyB,IAAI,CAAC,MAAM,CACXC,QAAQ,CAAElB,gBAAiB,CAC3BW,SAAS,CAAC,gCAAgC,CAC3C,CAAC,cACFnB,IAAA,WACE2B,OAAO,CAAEf,YAAa,CACtBO,SAAS,CAAC,2EAA2E,CAAAD,QAAA,CACtF,UAED,CAAQ,CAAC,EACN,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}