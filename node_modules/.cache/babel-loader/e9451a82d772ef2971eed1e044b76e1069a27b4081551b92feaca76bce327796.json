{"ast":null,"code":"import{createContext,useState,useEffect}from\"react\";import{getCurrentUser,getToken}from\"../utils/auth\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";export const UserContext=/*#__PURE__*/createContext();export const UserProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(null);useEffect(()=>{const decodedUser=getCurrentUser();if(decodedUser){// ⚡ On enrichit l’utilisateur depuis l’API\naxios.get(\"http://127.0.0.1:5000/api/users/me\",{headers:{Authorization:\"Bearer \".concat(getToken())}}).then(res=>setUser(res.data)).catch(err=>{console.error(\"Erreur récupération user:\",err);setUser(decodedUser);// fallback minimal (id, username)\n});}},[]);return/*#__PURE__*/_jsx(UserContext.Provider,{value:{user,setUser},children:children});};","map":{"version":3,"names":["createContext","useState","useEffect","getCurrentUser","getToken","axios","jsx","_jsx","UserContext","UserProvider","_ref","children","user","setUser","decodedUser","get","headers","Authorization","concat","then","res","data","catch","err","console","error","Provider","value"],"sources":["/home/kanga_prog_unix/hbnb_v2_frontend/src/contexts/UserContext.js"],"sourcesContent":["import { createContext, useState, useEffect } from \"react\";\nimport { getCurrentUser, getToken } from \"../utils/auth\";\nimport axios from \"axios\";\n\nexport const UserContext = createContext();\n\nexport const UserProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    const decodedUser = getCurrentUser();\n    if (decodedUser) {\n      // ⚡ On enrichit l’utilisateur depuis l’API\n      axios.get(\"http://127.0.0.1:5000/api/users/me\", {\n        headers: { Authorization: `Bearer ${getToken()}` }\n      })\n        .then(res => setUser(res.data))\n        .catch(err => {\n          console.error(\"Erreur récupération user:\", err);\n          setUser(decodedUser); // fallback minimal (id, username)\n        });\n    }\n  }, []);\n\n  return (\n    <UserContext.Provider value={{ user, setUser }}>\n      {children}\n    </UserContext.Provider>\n  );\n};\n"],"mappings":"AAAA,OAASA,aAAa,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC1D,OAASC,cAAc,CAAEC,QAAQ,KAAQ,eAAe,CACxD,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE1B,MAAO,MAAM,CAAAC,WAAW,cAAGR,aAAa,CAAC,CAAC,CAE1C,MAAO,MAAM,CAAAS,YAAY,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACvC,KAAM,CAACE,IAAI,CAAEC,OAAO,CAAC,CAAGZ,QAAQ,CAAC,IAAI,CAAC,CAEtCC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAY,WAAW,CAAGX,cAAc,CAAC,CAAC,CACpC,GAAIW,WAAW,CAAE,CACf;AACAT,KAAK,CAACU,GAAG,CAAC,oCAAoC,CAAE,CAC9CC,OAAO,CAAE,CAAEC,aAAa,WAAAC,MAAA,CAAYd,QAAQ,CAAC,CAAC,CAAG,CACnD,CAAC,CAAC,CACCe,IAAI,CAACC,GAAG,EAAIP,OAAO,CAACO,GAAG,CAACC,IAAI,CAAC,CAAC,CAC9BC,KAAK,CAACC,GAAG,EAAI,CACZC,OAAO,CAACC,KAAK,CAAC,2BAA2B,CAAEF,GAAG,CAAC,CAC/CV,OAAO,CAACC,WAAW,CAAC,CAAE;AACxB,CAAC,CAAC,CACN,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,mBACEP,IAAA,CAACC,WAAW,CAACkB,QAAQ,EAACC,KAAK,CAAE,CAAEf,IAAI,CAAEC,OAAQ,CAAE,CAAAF,QAAA,CAC5CA,QAAQ,CACW,CAAC,CAE3B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}