{"ast":null,"code":"var _jsxFileName = \"/home/kanga_prog_unix/hbnb_v2/frontend/src/components/place/ReservationForm.jsx\",\n  _s = $RefreshSig$();\n// src/components/place/ReservationForm.jsx\nimport { useState } from \"react\";\nimport API from \"../../services/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ReservationForm({\n  place_Id,\n  onReservationAdded\n}) {\n  _s();\n  const [start, setStart] = useState(\"\");\n  const [end, setEnd] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [success, setSuccess] = useState(\"\");\n  const formatDateTime = dt => (dt === null || dt === void 0 ? void 0 : dt.length) === 16 ? `${dt}:00` : dt;\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError(\"\");\n    setSuccess(\"\");\n    try {\n      const token = localStorage.getItem(\"token\");\n      if (!token) {\n        setError(\"Vous devez être connecté pour réserver ce lieu.\");\n        return;\n      }\n      const res = await API.post(`/reservations/`, {\n        place_id: place_Id,\n        start_datetime: formatDateTime(start),\n        end_datetime: formatDateTime(end)\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setStart(\"\");\n      setEnd(\"\");\n      setSuccess(\"Réservation créée avec succès !\");\n      if (onReservationAdded) onReservationAdded(res.data);\n    } catch (err) {\n      var _err$response, _err$response$data, _err$response2, _err$response2$data, _err$response3;\n      console.error(err);\n      const backendError = ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || ((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.error) || ((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : _err$response3.data);\n      setError(typeof backendError === \"string\" ? backendError : \"Erreur côté serveur.\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    style: {\n      marginTop: \"2rem\",\n      padding: \"1.5rem\",\n      border: \"1px solid #333\",\n      borderRadius: \"8px\",\n      backgroundColor: \"#fafafa\",\n      maxWidth: \"600px\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        color: \"#000\"\n      },\n      children: \"R\\xE9server ce lieu :\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: \"red\"\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }, this), success && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: \"green\"\n      },\n      children: success\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        margin: \"1rem 0\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        style: {\n          display: \"block\",\n          color: \"#000\",\n          marginBottom: \"0.5rem\"\n        },\n        children: \"D\\xE9but :\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"datetime-local\",\n        value: start,\n        onChange: e => setStart(e.target.value),\n        style: {\n          padding: \"0.5rem\",\n          width: \"100%\",\n          borderRadius: \"5px\",\n          border: \"1px solid #333\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        margin: \"1rem 0\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        style: {\n          display: \"block\",\n          color: \"#000\",\n          marginBottom: \"0.5rem\"\n        },\n        children: \"Fin :\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"datetime-local\",\n        value: end,\n        onChange: e => setEnd(e.target.value),\n        style: {\n          padding: \"0.5rem\",\n          width: \"100%\",\n          borderRadius: \"5px\",\n          border: \"1px solid #333\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      style: {\n        padding: \"0.6rem 1.2rem\",\n        borderRadius: \"5px\",\n        border: \"none\",\n        backgroundColor: \"#333\",\n        color: \"#fff\",\n        cursor: \"pointer\",\n        fontWeight: \"500\"\n      },\n      onMouseOver: e => e.currentTarget.style.backgroundColor = \"#555\",\n      onMouseOut: e => e.currentTarget.style.backgroundColor = \"#333\",\n      children: \"R\\xE9server\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n}\n_s(ReservationForm, \"16njlROkuoSf5lOyL6l+UibnEfs=\");\n_c = ReservationForm;\nvar _c;\n$RefreshReg$(_c, \"ReservationForm\");","map":{"version":3,"names":["useState","API","jsxDEV","_jsxDEV","ReservationForm","place_Id","onReservationAdded","_s","start","setStart","end","setEnd","error","setError","success","setSuccess","formatDateTime","dt","length","handleSubmit","e","preventDefault","token","localStorage","getItem","res","post","place_id","start_datetime","end_datetime","headers","Authorization","data","err","_err$response","_err$response$data","_err$response2","_err$response2$data","_err$response3","console","backendError","response","message","onSubmit","style","marginTop","padding","border","borderRadius","backgroundColor","maxWidth","children","color","fileName","_jsxFileName","lineNumber","columnNumber","margin","display","marginBottom","type","value","onChange","target","width","cursor","fontWeight","onMouseOver","currentTarget","onMouseOut","_c","$RefreshReg$"],"sources":["/home/kanga_prog_unix/hbnb_v2/frontend/src/components/place/ReservationForm.jsx"],"sourcesContent":["// src/components/place/ReservationForm.jsx\nimport { useState } from \"react\";\nimport API from \"../../services/api\";\n\nexport default function ReservationForm({ place_Id, onReservationAdded }) {\n  const [start, setStart] = useState(\"\");\n  const [end, setEnd] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [success, setSuccess] = useState(\"\");\n\n  const formatDateTime = (dt) => dt?.length === 16 ? `${dt}:00` : dt;\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError(\"\");\n    setSuccess(\"\");\n\n    try {\n      const token = localStorage.getItem(\"token\");\n      if (!token) {\n        setError(\"Vous devez être connecté pour réserver ce lieu.\");\n        return;\n      }\n\n      const res = await API.post(\n        `/reservations/`,\n        {\n          place_id: place_Id,\n          start_datetime: formatDateTime(start),\n          end_datetime: formatDateTime(end),\n        },\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n\n      setStart(\"\");\n      setEnd(\"\");\n      setSuccess(\"Réservation créée avec succès !\");\n      if (onReservationAdded) onReservationAdded(res.data);\n    } catch (err) {\n      console.error(err);\n      const backendError = err.response?.data?.message || err.response?.data?.error || err.response?.data;\n      setError(typeof backendError === \"string\" ? backendError : \"Erreur côté serveur.\");\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} style={{\n      marginTop: \"2rem\",\n      padding: \"1.5rem\",\n      border: \"1px solid #333\",\n      borderRadius: \"8px\",\n      backgroundColor: \"#fafafa\",\n      maxWidth: \"600px\"\n    }}>\n      <h3 style={{ color: \"#000\" }}>Réserver ce lieu :</h3>\n\n      {error && <p style={{ color: \"red\" }}>{error}</p>}\n      {success && <p style={{ color: \"green\" }}>{success}</p>}\n\n      <div style={{ margin: \"1rem 0\" }}>\n        <label style={{ display: \"block\", color: \"#000\", marginBottom: \"0.5rem\" }}>Début :</label>\n        <input\n          type=\"datetime-local\"\n          value={start}\n          onChange={(e) => setStart(e.target.value)}\n          style={{ padding: \"0.5rem\", width: \"100%\", borderRadius: \"5px\", border: \"1px solid #333\" }}\n        />\n      </div>\n\n      <div style={{ margin: \"1rem 0\" }}>\n        <label style={{ display: \"block\", color: \"#000\", marginBottom: \"0.5rem\" }}>Fin :</label>\n        <input\n          type=\"datetime-local\"\n          value={end}\n          onChange={(e) => setEnd(e.target.value)}\n          style={{ padding: \"0.5rem\", width: \"100%\", borderRadius: \"5px\", border: \"1px solid #333\" }}\n        />\n      </div>\n\n      <button\n        type=\"submit\"\n        style={{\n          padding: \"0.6rem 1.2rem\",\n          borderRadius: \"5px\",\n          border: \"none\",\n          backgroundColor: \"#333\",\n          color: \"#fff\",\n          cursor: \"pointer\",\n          fontWeight: \"500\"\n        }}\n        onMouseOver={(e) => (e.currentTarget.style.backgroundColor = \"#555\")}\n        onMouseOut={(e) => (e.currentTarget.style.backgroundColor = \"#333\")}\n      >\n        Réserver\n      </button>\n    </form>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}